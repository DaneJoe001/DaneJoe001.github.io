# 开发日志

## 2023年6月15日 - 项目初始化与基础结构搭建

### 完成工作

1. **项目初始化**
   - 使用Vue CLI创建Vue 3项目
   - 初始化Git仓库并进行首次提交

2. **依赖安装**
   - 安装Markdown渲染库: `marked`
   - 安装代码高亮库: `prismjs`
   - 安装图标库: `font-awesome`

3. **目录结构创建**
   - 创建Markdown文件存储目录
     - `src/assets/markdown/notes/cpp`
     - `src/assets/markdown/notes/stm32`
     - `src/assets/markdown/notes/qt`
     - `src/assets/markdown/projects/wordbox`
     - `src/assets/markdown/projects/doctools`
   - 创建样式目录: `src/assets/styles`

4. **样式文件创建**
   - `theme.css`: 主题相关样式(暗色/亮色)
   - `main.css`: 全局布局样式
   - `markdown.css`: Markdown内容渲染样式

5. **组件开发**
   - `Sidebar.vue`: 左侧菜单栏组件
     - 实现菜单折叠/展开功能
     - 实现主题切换功能
     - 添加个人信息展示
   - `Content.vue`: 右侧内容区域组件
     - 实现Markdown渲染
     - 实现代码高亮

6. **示例内容创建**
   - 为各笔记和项目创建示例Markdown文件
   - 创建"关于我"页面内容

### 遇到的问题与解决方案

1. **ESLint错误: 组件命名规范**
   - 问题: Sidebar组件名称不符合Vue多词组件命名规范
   - 解决: 将组件名从'Sidebar'改为'SidebarMenu'

2. **Markdown文件加载错误**
   - 问题: Vue无法直接导入.md文件
   - 尝试方案1: 安装raw-loader
   - 尝试方案2: 安装markdown-loader和html-loader
   - 尝试方案3: 安装vue-markdown-loader
   - 最终解决方案: 直接在组件中使用字符串方式提供Markdown内容，避免文件导入问题

3. **未使用变量警告**
   - 问题: Content.vue中定义了未使用的变量
   - 解决: 删除未使用的变量和导入

## 2023年7月20日 - 响应式设计优化与首页功能添加

### 完成工作

1. **响应式布局优化**
   - 添加了不同屏幕尺寸的媒体查询（1200px、992px、768px、480px）
   - 优化了移动端、平板设备和桌面端的显示效果
   - 添加了防止水平溢出滚动的样式

2. **侧边栏响应式优化**
   - 在移动端下实现了侧边栏的滑动显示/隐藏效果
   - 添加了背景遮罩层，提升移动端体验
   - 根据不同屏幕尺寸调整了侧边栏宽度

3. **内容区域优化**
   - 移除了内容区域的重复标题
   - 调整了内容区域的边距和最大宽度
   - 优化了目录在不同设备上的显示位置
   - 在小屏幕下调整了字体大小和行高

4. **首页功能添加**
   - 添加了首页作为一级菜单项
   - 设置首页为默认加载页面
   - 创建了首页内容展示博客概览
   - 更新了个人技术栈，突出C++和嵌入式开发背景

5. **打印样式支持**
   - 添加了专门的打印媒体查询
   - 针对打印场景优化了页面布局

### 遇到的问题与解决方案

1. **重复标题显示问题**
   - 问题：Markdown内容中已有标题，但页面顶部又显示同样的标题导致重复
   - 解决方案：移除了顶部标题显示，优化了Markdown标题的样式和间距

2. **移动端适配问题**
   - 问题：在小屏设备上侧边栏遮挡内容
   - 解决方案：实现侧边栏完全隐藏并通过按钮触发显示的机制

3. **目录展示冲突**
   - 问题：在移动端设备上，左侧目录与侧边栏重叠
   - 解决方案：将移动端的目录调整到底部显示，可折叠收起

## 2023年11月15日 - 界面优化与bug修复

### 完成工作

1. **固定侧边栏**
   - 修改了侧边栏样式，使其在页面滚动时保持固定位置
   - 优化了侧边栏的折叠/展开功能

2. **字体与布局调整**
   - 增加了整体字体大小，提高可读性
   - 优化了内容区域与侧边栏的间距比例
   - 调整了标题和段落样式，使页面显示更加协调

3. **Markdown目录生成功能**
   - 实现了根据Markdown内容自动生成目录功能
   - 添加了标题ID生成和锚点跳转功能
   - 优化了目录折叠/展开控制

4. **修复目录与内容重叠问题**
   - 重构了页面布局计算逻辑，解决目录与内容重叠问题
   - 添加了响应式布局支持，确保在不同屏幕尺寸下正确显示
   - 针对笔记页面进行了特殊优化，确保长内容正确显示

5. **性能优化**
   - 添加了窗口大小变化事件监听，动态调整布局
   - 优化了Markdown渲染过程，提高加载速度
   - 处理了各种边缘情况下的样式问题

### 遇到的问题与解决方案

1. **目录与内容重叠问题**
   - 问题：在某些页面（特别是笔记页面）目录与内容区域重叠
   - 解决方案：实现动态计算内容区域宽度，根据侧边栏、目录状态和窗口大小自动调整布局

2. **变量作用域问题**
   - 问题：JavaScript变量作用域导致的contentMaxWidth未定义错误
   - 解决方案：将局部变量提升为方法作用域变量，确保在整个方法中可访问

3. **响应式布局适配**
   - 问题：在不同设备和窗口尺寸下布局显示不一致
   - 解决方案：添加更细粒度的媒体查询和动态样式计算，针对特定页面类型做专门处理

4. **标签污染**
   - 问题：CSS样式应用不一致导致页面显示混乱
   - 解决方案：移除部分组件的scoped标签，统一样式应用，同时使用数据属性区分不同页面类型

## 后续计划

1. **功能完善**
   - 添加博客文章搜索功能
   - 实现主题定制和保存功能
   - 优化文章内容加载性能

2. **内容管理**
   - 建立文章分类与标签系统
   - 添加文章阅读量统计
   - 扩充技术内容，尤其是C++与嵌入式相关内容

3. **用户体验提升**
   - 添加页面切换过渡动画
   - 优化代码块的显示样式
   - 完善夜间模式的视觉体验 

## 2024年6月19日 - 添加串口调试工具项目

### 完成工作

1. **项目扩展**
   - 在项目菜单下新增"串口调试工具"子项目
   - 创建串口调试工具的项目介绍文档
   - 设计完整的功能说明和应用场景

2. **内容编写**
   - 撰写串口调试工具的详细功能介绍
   - 添加使用指南和高级功能说明
   - 制定项目发展计划和更新日志

3. **移动端优化**
   - 优化串口调试工具在移动设备上的显示效果
   - 调整响应式布局，确保在各种屏幕尺寸下正常显示
   - 提升移动设备上的操作体验

### 遇到的问题与解决方案

1. **菜单显示问题**
   - 问题：添加新菜单项后，在小屏幕设备上菜单显示不全
   - 解决方案：调整菜单项样式，优化折叠状态下的显示效果

2. **内容结构规划**
   - 问题：串口调试工具内容组织结构需要合理规划
   - 解决方案：参考现有项目文档结构，确保内容层次清晰，重点突出

### 后续优化计划

1. **添加实际串口工具截图**
   - 替换占位图片，添加真实的串口调试工具界面截图
   - 为不同功能模块添加对应的操作截图

2. **完善技术细节**
   - 补充技术实现部分的详细说明
   - 添加关键代码示例和实现原理 

## 2024年6月20日 - Markdown图片路径使用规范

### 完成工作

1. **解决Markdown中图片加载问题**
   - 修正Qt笔记中测试图片无法显示的问题
   - 制定并实施图片引用规范

2. **图片路径使用规范**
   - **使用绝对路径**：在Markdown文件中引用图片时，必须使用以根目录为基准的绝对路径（以`/`开头）
     - 正确示例：`/markdown/notes/qt/assets/图片名.png`
     - 错误示例：`./assets/图片名.png` 或 `../assets/图片名.png`
   - **图片存放位置**：图片文件应放在与Markdown文件相关的资源目录中，如`public/markdown/notes/qt/assets/`
   - **图片引用格式**：使用标准的Markdown图片语法
     - 正确格式：`![图片描述](/markdown/notes/qt/assets/图片名.png)`
     - 避免在描述中使用不必要的引号：`!["图片描述"](/path/to/image.png)`
   - **文件命名规范**：
     - 避免在文件名中使用中文和特殊字符
     - 推荐使用小写字母、数字和连字符（如`qt-window-1.png`）
  
### 遇到的问题与解决方案

1. **图片路径解析问题**
   - 问题：在Vue项目中，Markdown文件中使用相对路径引用图片时无法正确解析
   - 解决方案：统一使用绝对路径（以网站根目录为基准）引用所有图片资源

2. **文档一致性**
   - 问题：不同文档中图片引用方式不一致
   - 解决方案：制定统一的图片引用规范并应用到所有文档中

### 后续优化计划

1. **自动化工具开发**
   - 考虑开发工具自动检测和转换Markdown文件中的相对路径为绝对路径
   - 实现图片资源的自动优化（压缩、重命名等）

2. **文档审查**
   - 对现有所有Markdown文档进行审查，确保图片路径符合新规范
   - 更新开发指南，明确图片使用的最佳实践 

## 2024年6月21日 - GitHub Pages部署配置

### 完成工作

1. **GitHub Pages部署配置**
   - 添加`publicPath`配置到`vue.config.js`文件
   - 优化资源路径处理以适应GitHub Pages子目录环境

2. **路径问题解决**
   - 修复部署到GitHub Pages后可能出现的图片路径问题
   - 统一所有静态资源的引用路径

### 遇到的问题与解决方案

1. **GitHub Pages子目录部署**
   - 问题：部署到GitHub Pages后，资源路径因子目录结构而失效
   - 解决方案：在`vue.config.js`中设置`publicPath: '/vue_blog_demo02/'`

2. **图片加载失败**
   - 问题：部署后图片可能无法正确加载
   - 解决方案：确保所有图片使用绝对路径，且路径考虑仓库名作为前缀

3. **路由刷新404问题**
   - 问题：使用Vue Router的history模式时，刷新页面会返回404
   - 解决方案：考虑创建自定义404.html页面重定向到index.html，或改用hash模式路由

### 部署指南

1. **构建与部署步骤**
   ```bash
   # 构建项目
   npm run build
   
   # 进入构建目录
   cd dist
   
   # 初始化git仓库
   git init
   git add -A
   git commit -m 'deploy'
   
   # 推送到gh-pages分支
   git push -f git@github.com:用户名/vue_blog_demo02.git main:gh-pages
   ```

2. **注意事项**
   - 确保所有图片使用正确的绝对路径：`/vue_blog_demo02/markdown/...`
   - 部署后访问地址为：`https://用户名.github.io/vue_blog_demo02/`
   - 如使用history模式路由，需要特殊处理404页面 

## 2023年7月12日
- 添加了web_icon.ico作为网页图标
- 修改index.html，将favicon.ico替换为web_icon.ico
- 将网站名称修改为"水漫金山的博客" 